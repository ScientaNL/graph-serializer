var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();define("Scheme",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.serializer=function(e){return e},this.deserializer=function(e){return e}};t.Scheme=r}),define("Store",["require","exports","typescript-map","Scheme"],function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){void 0===t&&(t={}),this.name=e,this.setDecoration(t)}return e.prototype.setDecoration=function(e){return this.scheme=void 0===e.scheme?new i.Scheme:e.scheme,this.serializedName=void 0===e.serializedName?this.name:e.serializedName,this},e}();t.PropertyDescription=o;var n=function(){function e(){this.postDeserialize=function(){},this.properties=new r.TSMap}return e.prototype.setDecoration=function(e){return void 0===e||(this.postDeserialize=void 0===e.postDeserialize?function(){}:e.postDeserialize),this},e}();t.ClassDescription=n;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.get=function(e){return this.has(e)||this.set(e,new n),t.prototype.get.call(this,e)},e}(r.TSMap);t.Store=s,t.store=new s}),define("Decorators",["require","exports","Store"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializable=function(r){return void 0===r&&(r={}),function(e,t){if(1===arguments.length)i.store.get(e).setDecoration(r);else{if(3!==arguments.length)throw new Error("Invalid decorator");i.store.get(e.constructor).properties.set(t,new i.PropertyDescription(t,r))}}}}),define("Serializer",["require","exports","Store"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=function e(t,r){var i=new t;if(Object.getPrototypeOf(t)instanceof Function){var o=e(Object.getPrototypeOf(Object.getPrototypeOf(new t)).constructor,r);Object.keys(o).forEach(function(e){i[e]=o[e]})}return n.store.get(t).properties.forEach(function(e,t){i[t]=e.scheme.deserializer(r[e.serializedName])}),n.store.get(t).postDeserialize(i),i},t.serialize=function e(r){var i={};if(Object.getPrototypeOf(Object.getPrototypeOf(r)).constructor!==Object){var t=e(new(Object.getPrototypeOf(Object.getPrototypeOf(r)).constructor));Object.keys(t).forEach(function(e){i[e]=t[e]})}return n.store.get(r.constructor).properties.forEach(function(e,t){i[e.serializedName]=e.scheme.serializer(r[t])}),i}}),define("Types",["require","exports","Scheme","Serializer"],function(e,r,i,o){"use strict";var t;Object.defineProperty(r,"__esModule",{value:!0}),r.primitive=new i.Scheme,r.date=((t=new i.Scheme).serializer=function(e){return e instanceof Date?e.toJSON():e},t.deserializer=function(e){return"string"==typeof e?new Date(e):e},t),r.array=function(t){void 0===t&&(t=r.primitive);var e=new i.Scheme;return e.serializer=function(e){return e.map(function(e){return t.serializer(e)})},e.deserializer=function(e){return void 0===e?e:e.map(function(e){return t.deserializer(e)})},e},r.object=function(t){var e=new i.Scheme;return e.serializer=function(e){return o.serialize(e)},e.deserializer=function(e){return o.deserialize(t,e)},e},r.custom=function(e,t){var r=new i.Scheme;return r.serializer=e,r.deserializer=t,r}}),define("graph-serializer",["require","exports","Scheme","Store","Types","Serializer","Decorators"],function(e,t,r,i,o,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheme=r.Scheme,t.ClassDescription=i.ClassDescription,t.PropertyDescription=i.PropertyDescription,t.Store=i.Store,t.array=o.array,t.custom=o.custom,t.date=o.date,t.object=o.object,t.primitive=o.primitive,t.deserialize=n.deserialize,t.serialize=n.serialize,t.serializable=s.serializable});